# 更新日志

Storage Manager Pro 的所有重要更改都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)，
本项目遵循 [语义化版本](https://semver.org/spec/v2.0.0.html)。

## [2.1.2] - 2025-07-01

### ✨ 增强功能

#### 🔧 **代码质量与开发体验**
- **ESLint 配置升级** - 实施了包含 React、TypeScript 和现代 JavaScript 标准的全面 ESLint 规则
- **自动代码格式化** - 添加了一致的代码风格强制执行和自动修复功能
- **类型安全改进** - 通过更严格的类型检查增强了 TypeScript 配置
- **构建流程优化** - 通过更好的代码检查集成改进了开发工作流程

#### 🎨 **UI/UX 改进**
- **统一滚动条设计** - 在所有组件中实现了一致的滚动条样式
- **暗黑模式滚动条增强** - 优化了暗黑主题中的滚动条外观，采用现代渐变和圆角设计
- **响应式滚动条行为** - 为不同组件上下文添加了自适应滚动条尺寸
- **跨浏览器兼容性** - 确保滚动条样式在 WebKit 和 Firefox 浏览器中保持一致

#### 📋 **文档与发布流程**
- **自动化发布工作流** - 创建了包含版本同步的全面一键发布脚本
- **文档同步** - 确保所有文档文件保持一致的版本控制和内容
- **多语言支持** - 更新了英文和中文文档，包含最新功能
- **发布自动化** - 简化了构建、打包、提交和部署流程

### 🛠️ **技术改进**
- **ESLint 规则** - 添加了 50+ 个代码质量规则，涵盖 React hooks、TypeScript 最佳实践和代码格式化
- **SCSS 模块化** - 通过专用滚动条组件样式增强了样式表组织
- **构建脚本** - 改进了 package.json 脚本，提供更好的开发和发布工作流程
- **错误处理** - 修复了剩余的 ESLint 错误和警告，使代码库更加清洁

### 📚 **文档更新**
- **版本一致性** - 同步了所有配置文件中的版本号
- **功能文档** - 更新了教程和指南以反映最新改进
- **发布说明** - 增强了更新日志格式，包含详细分类和技术细节

## [2.1.1] - 2025-06-30

### 🐛 修复

#### 🔧 **扩展上下文稳定性**
- **扩展上下文失效错误修复** - 解决了扩展重新加载或更新期间出现的"Extension context invalidated"错误
- **智能重试机制** - 添加了具有指数退避的智能重试逻辑（1秒、2秒、3秒延迟）
- **上下文验证** - 在 Chrome API 调用之前实现扩展上下文有效性检查
- **错误类型识别** - 增强错误处理以识别和处理各种上下文失效场景
- **通信稳定性** - 改进内容脚本 ↔ 后台脚本通信的可靠性
- **优雅降级** - 在扩展上下文不可用时添加回退机制

#### 🛠️ **技术改进**
- **ExtensionContextUtils 类** - 创建用于上下文管理的集中式实用程序类
- **增强错误处理** - 添加全面的错误分类和用户友好的消息
- **日志改进** - 增强上下文相关问题的调试信息
- **代码整合** - 统一所有 Chrome API 交互的重试逻辑

### 📚 文档
- **扩展上下文修复指南** - 添加全面的文档（`docs/EXTENSION_CONTEXT_FIX.md`）
- **错误故障排除** - 详细说明原因、解决方案和预防措施
- **开发者指南** - 在 Chrome 扩展中处理扩展上下文的最佳实践

## [2.1.0] - 2025-06-29

### ✨ 新增功能

#### 🔧 **增强的编码解码工具**
- **恢复 Base64/UTF-8 编码** - 在 JSON 格式化工具旁重新添加 Base64 和 UTF-8 编码/解码按钮
- **独立编码工具模态框** - 创建专门的编码解码工作区，支持标签页界面
- **全屏编辑器增强** - 在全屏编辑模式中添加编码解码功能
- **智能工具集成** - 将编码工具无缝集成到所有存储面板中

#### 🎯 **智能域名管理**
- **智能当前域名检测** - 自动选择当前活跃标签页的域名作为默认值
- **智能 Cookie 域名设置** - 自动配置 Cookie 域名字段为顶级域名（如 www.yy.com → .yy.com）
- **IP 地址支持** - 为 Cookie 域名设置保持原始 IP 地址
- **增强域名逻辑** - 改进弹窗和标签页模式下的域名提取和验证

#### 🎨 **UI/UX 改进**
- **模态框居中修复** - 确保所有模态框在弹窗模式下正确居中显示
- **全屏编辑器优化** - 增强全屏编辑，提供更好的布局和工具可访问性
- **响应式格式按钮** - 改进按钮布局，使用 flex-wrap 提供更好的移动体验
- **增强编码界面** - 为 Base64 和 UTF-8 操作添加直观的标签页界面

### 🔄 变更

#### 🛠️ **工具集成**
- **统一编码访问** - 在 LocalStorage 和 SessionStorage 面板中添加编码工具按钮
- **增强格式工具栏** - 在普通和全屏模式下扩展格式化选项
- **改进工具可发现性** - 使编码解码工具在整个界面中更易访问

#### 🎯 **域名处理**
- **优先域名选择** - 当前活跃标签页域名现在在域名下拉列表中优先显示
- **智能 Cookie 默认值** - Cookie 创建现在使用智能域名提取以获得更好的兼容性

### 🐛 修复

#### 🔧 **技术问题**
- **模态框定位** - 修复弹窗模式下的模态框居中问题
- **域名检测** - 解决新标签页和弹窗模式下的当前域名检测问题
- **Cookie 域名逻辑** - 修复 Cookie 域名字段以使用适当的顶级域名格式

#### 🎨 **UI 修复**
- **全屏布局** - 改进全屏编辑器以正确利用可用空间
- **按钮响应性** - 增强格式按钮布局，更好地支持移动设备和小屏幕
- **主题一致性** - 确保编码工具模态框正确遵循暗黑/明亮主题

### 🌐 **国际化**

#### 📝 **新翻译**
- 为编码工具界面添加中文翻译
- 为新编码功能添加英文翻译
- 增强所有新 UI 元素的翻译覆盖

### 📊 **性能与质量**

#### 🚀 **优化**
- **高效工具加载** - 优化编码工具模态框以实现更快渲染
- **智能组件更新** - 改进编码操作的 React 组件效率
- **内存管理** - 增强编码解码操作的清理

## [2.0.0] - 2025-06-20

### 🎉 重大发布 - 完整架构重写

这是一个重大发布，使用现代 Web 技术完全重写了 Storage Manager Pro。

### ✨ 新增

#### 🔧 **新技术栈**
- **React 18+** - 基于 Hooks 的现代组件架构
- **TypeScript 5+** - 完整的类型安全和更好的开发体验
- **Vite 5+** - 具有热模块替换的超快构建工具
- **SCSS 模块** - 模块化和可维护的样式系统
- **Zustand** - 轻量级状态管理解决方案

#### 🏗️ **架构改进**
- **服务层** - 模块化 Chrome API 包装器，提高可维护性
- **组件库** - 具有一致设计的可重用 React 组件
- **Hook 系统** - 用于状态和副作用管理的自定义 React hooks
- **类型定义** - 全面的 TypeScript 接口和类型
- **错误边界** - 强大的错误处理和恢复机制

#### 🧪 **测试与质量保证**
- **功能验证** - 全面的集成测试套件
- **端到端测试** - 存储操作的端到端测试
- **性能分析** - 构建大小和运行时性能监控
- **兼容性测试** - Chrome 扩展 API 兼容性验证
- **构建分析** - 详细的包分析和优化建议

#### 🛠️ **开发工具**
- **热重载** - 使用 Vite 的即时开发反馈
- **类型检查** - 实时 TypeScript 验证
- **构建优化** - 自动代码分割和压缩
- **性能监控** - 运行时性能指标和分析

### 🔄 变更

#### 📦 **构建系统**
- 从原生 JavaScript 迁移到 React + TypeScript + Vite
- 实现模块化 SCSS 架构和 CSS 模块
- 添加自动构建优化和代码分割
- 通过热模块替换改进开发工作流

#### 🎨 **用户界面**
- 使用现代 React 组件重新设计
- 增强响应式设计和可访问性
- 改进主题系统和更好的配色方案
- 优化组件渲染性能

#### 🔧 **代码组织**
- 重构项目，明确关注点分离
- 实现面向服务的架构
- 添加全面的类型定义
- 改进错误处理和用户反馈

### 🐛 修复

#### 🔧 **技术问题**
- 通过迁移到 @use 语法修复 SCSS 弃用警告
- 解决 TypeScript 编译错误和类型不一致
- 改进 Chrome 扩展 API 兼容性
- 增强边缘情况的错误处理

#### 🎯 **性能优化**
- 通过代码分割和 tree shaking 减少包大小
- 使用 React.memo 和 hooks 优化组件渲染
- 改进内存管理和清理
- 通过懒加载增强加载性能

### 📊 **性能指标**

- **包大小**: ~360KB（优化后）
- **加载时间**: <500ms
- **内存使用**: <10MB
- **兼容性评分**: 95%+
- **构建时间**: <30s

### 🔧 **技术详情**

#### **项目结构**
```
src/
├── components/          # React 组件
├── services/           # Chrome API 服务
├── hooks/              # 自定义 React hooks
├── styles/             # SCSS 模块
├── types/              # TypeScript 定义
├── locales/            # 国际化资源
├── background/         # Service worker
├── content/            # 内容脚本
└── tab/                # 主界面
```

#### **构建命令**
```bash
npm install             # 安装依赖
npm run dev            # 开发模式
npm run build          # 生产构建
npm run type-check     # TypeScript 验证
node scripts/analyze-build.js  # 包分析
```

### 🚀 **迁移指南**

对于从 v1.x 升级的用户：

1. **安装**: 无需更改 - 扩展将自动更新
2. **功能**: 所有现有功能都得到保留和增强
3. **数据**: 所有存储的配置和数据保持兼容
4. **设置**: 主题和语言偏好得到维护

### 🔮 **未来路线图**

- **v2.1.0**: 增强的 IndexedDB 管理功能
- **v2.2.0**: 高级数据导出/导入功能
- **v2.3.0**: 自定义数据处理器的插件系统
- **v3.0.0**: 基于 Web 的配套应用

---

## [1.1.10] - 2025-6-2

### 新增
- 双语支持（中文/英文）
- 现代设计的增强 UI
- 配置文件管理系统

### 修复
- 编辑按钮布局问题
- 存储数据同步问题
- 主题切换不一致问题

### 变更
- 改进用户界面设计
- 更好的错误处理和用户反馈
- 增强性能和稳定性

---

## [1.1.0] - 2025-5-15

### 新增
- JSON 格式化和压缩工具
- Base64 编码/解码功能
- 持久窗口的固定功能
- 从活跃标签页选择域名
- 备份和恢复功能

### 修复
- 内容脚本注入问题
- 跨域访问问题
- 不同屏幕尺寸下的 UI 响应性

---

## [1.0.0] - 2025-5-4

### 新增
- Storage Manager Pro 初始发布
- LocalStorage 管理
- SessionStorage 编辑
- Cookie 管理
- IndexedDB 查看
- 基本主题支持
- 多域名支持

---

## 图例

- 🎉 重大发布
- ✨ 新增 - 新功能
- 🔄 变更 - 现有功能的变更
- 🐛 修复 - Bug 修复
- 🔧 技术 - 技术改进
- 📦 构建 - 构建系统变更
- 🎨 UI - 用户界面改进
- 🚀 性能 - 性能改进
- 📊 指标 - 性能和分析数据
